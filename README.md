### ApplicationServiceWebAPI

## Данный сервис представляет API для работы с базой данных заявок и создателей заявок. 

Сервис пытается следовать принципам REST Api, предоставляя набор запросов для получения данных из БД.
![image](https://github.com/ivanjabrony/ApplicationService/assets/92732500/c4c5212c-56ad-4980-9ca0-07fbd9f8f45d)

В виду архитектуры сервиса, можно добавить и другие порты к Model слою приложения. Для этого нужно имплементировать интерфейсы **'IUserRepository'**, **'IApplicationRepository'** и **'IDraftRepository'**.

Работа с БД выполняется с помощью **EntityFrameWork Core** и **Npgsql** расширения. Базой данных используется диалект **PostgreSQL**, 
данные для подключения к бд необходимо прописать в **ServiceCollectionExtensions.cs** в 'connection string' при регистрации **DbContext**. (По хорошему добавить поддержку файлов конфигурации, но на это не хватило времени)

Чтобы работать с базой данных в рамках приложения, используется класс ApplicationContext, все действия с бд проходят через него. Но для изоляции данных от пользователя используются интерфейсы **IUserService** и **IApplicationService**.

Само Api реализовано на базе фреймворка **ASP.NEt Core** и на основе идей **minimal API**, в основном по причине того что не хватило времени на полноценный модуль с контроллерами и большим количеством запросов.

### Для работы приложения нужно:

- Рабочая база данных на локальном хосте(либо изменить подключение), например: Контейнер в **Docker** или сервер запущенный с помощью **PgAdmin**
- **EF Core CLI** или его плагин в вашей IDE для установки миграций на базу данных
- Что-то с помощью чего вы можете отправлять http реквесты в сервис

Соответственно в начале работы с сервисом подключаемся к базе данных, накатываем миграции и можно работать.

## Важное замечание
**Сервис не тестировался на реальных запросах, на написание Unit тестов на хотя бы in-memory базах данных не хватило времени, на тест реквестов и респонсов тоже**

### Как использовать:

- Для работы с черновиками и заявками конкретного юзера нужно его зарегистрировать. Если юзер зарегистрирован, то логиниться не нужно, остальные запросы сами найдут юзера по его Id (необходим зарегистрированный юзер)
- Для создания черновика нужно в его запрос подать JSON файл с заготовкой для него (необходим зарегистрированный юзер)
- Можно дополнить черновик отдельным запросом, подав туда JSON с новыми данными (необходим зарегистрированный юзер)
- Можно перевести черновик в класс Законченных заявок, такие заявки автоматически определяются как отправленные комиссии (соответственно черновик это та же заявка, просто не отправленная) (необходим зарегистрированный юзер)
- Можно по запросу достать список всех черновиков от какой-то даты, список законченных заявок от какой-то даты(они же отправленные заявки) для передачи их в другие сервисы(тот же робот для отправки уведомлений)
- Можно удалить черновик заявки (необходим зарегистрированный юзер)
- Можно достать какую-либо законченную заявку по ее Id или же черновик какого-то конкретного юзера по его Id (необходим зарегистрированный юзер для доставания черновика)

Соответственно запросы делятся на два типа
  1 Те для которых нужен зарегестрирвоанный юзер
  2 Те для которых не нужен юзер
Сделано в рассчете на расширение приложения и создание возможности добавить какой-нибудь интерактивный интерфейс для самого юзера
